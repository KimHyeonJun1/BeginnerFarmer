<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.farm.diary.DiaryMapper">

<!-- 특정 diary_id에 해당하는 관찰일지 정보 조회 -->
<select id="getOneDiary" resultType="diary">
select *
from diary
where diary_id = #{diary_id}
</select>

<!-- 관찰일지 신규저장 -->
<insert id="registerDiary">
insert into diary ( diary_title, diary_content, writer )
values ( #{diary_title, jdbcType=VARCHAR}, #{diary_content, jdbcType=VARCHAR}, #{writer})
</insert>


<!-- 특정 writer에 대한 관찰일지 목록 조회 -->
<select id="getListOfDiaryByWriter" parameterType="String" resultType="diary">
select *
from (SELECT row_number() over(order by diary_id) no, 
    diary_id,
    diary_title,
    writer,
    diary_writedate
FROM diary
WHERE writer = #{writer} )
order by no desc
</select>

</mapper>